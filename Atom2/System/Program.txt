load-file System.txt pragma

reference "System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" "System.Windows.Forms" pragma
reference "System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" "System.Drawing" pragma

(1 10  2 range (i show) (i) map) (mapTest) set
(1000 dumpPrimes "done" output) (primesTest) set

(factorialTest) "computes and shows the factorial of 20"
(
  20.0 factorial show
)
word

("Hello World!" output) (outputTest) set
(1 show 100000 newArray (array) put (array (true i) SetValue) (i) 0 99999 1 for 2 show) (arrayTest) set

(test) "performs various tests"
(
  Form new (form) put

  47
  (
    (value 11 greater)
      ("hi" show)
    (value 47 equal)
      ("ho" show)
    (form Object isSubclassOf)
      ("form" show)
  )
  select

  "hello"
  (
  1
    (1 show)
  "hello"
    ("Hello World!" show)
  9
    (9 show)
  )
  switch

  (1 2 3 5 6 7) splitHalve "hugo" swap prepend show show
)
word

Form new
: (form) put
: TextBox new
  : (textBox) put
  : (true) Multiline
  : (Color LightGreen) BackColor
  : (DockStyle Fill) Dock
  addControl
: Button new 
  : ("Press") Text
  : (DockStyle Top) Dock
  : (textBox) (textBox ("Hello World") AppendText) (Click) addEventHandler 
  addControl
: MenuStrip new 
  : ToolStripMenuItem ("File") new
    :  "Quit" (form) (form Close) addMenuItem
    addToolStripItem
  : ToolStripMenuItem ("Test") new
    : "Map Test" empty (mapTest) addMenuItem
    : "Dump Primes" empty (primesTest) addMenuItem
    : "Factorial Test" empty (factorialTest) addMenuItem
    : "Hello World" empty (outputTest) addMenuItem
    : "Array Test" empty (arrayTest) addMenuItem
    : "Test" empty (test) addMenuItem
    addToolStripItem
  addControl
ShowDialog .
